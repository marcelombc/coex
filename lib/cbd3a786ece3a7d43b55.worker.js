!function(t){function a(n){if(i[n])return i[n].exports;var s=i[n]={exports:{},id:n,loaded:!1};return t[n].call(s.exports,s,s.exports,a),s.loaded=!0,s.exports}var i={};return a.m=t,a.c=i,a.p="/lib/",a(0)}([function(t,a,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t){for(var a=[],i=void 0,n=0,s=t.length;n<s;n+=4)i=[t[n],t[n+1],t[n+2]],a.push(i);return a}function e(t,a){var i=[],n=[],s=void 0,e=void 0,r=void 0,_=void 0;for(s=0;s<t;s+=1){r=a.shift(),_=r.split();for(var o=0,u=_.length;o<u;o+=1)a.push(new h.default(_[o]));r.destroy()}for(a.sort(function(t,a){return a.size()-t.size()}),s=0,e=a.length;s<e;s+=1)i.push(a[s].average());for(s=0;s<t;s+=1)n.push({red:i[s][0],green:i[s][1],blue:i[s][2]});return n}var r=i(1),h=n(r);self.onmessage=function(t){var a=t.data.imageData,i=t.data.maxPaletteColors,n=t.data.instanceId,r=[],_=s(a);r.push(new h.default(_));var o=e(i,r);self.postMessage({instanceId:n,palette:o})}},function(t,a){"use strict";function i(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function t(t,a){for(var i=0;i<a.length;i++){var n=a[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(a,i,n){return i&&t(a.prototype,i),n&&t(a,n),a}}(),s=function(){function t(a){i(this,t),this._data=a,this._dataLength=a.length,this._calculateMinMaxAxis()}return n(t,[{key:"destroy",value:function(){this._data=null,this._dataLength=null,this._axisMinMax=null}},{key:"split",value:function(){var t=this._getLargestAxis();this._data.sort(function(a,i){return a[t]-i[t]});var a=this._medianPoint(),i=this._data.slice(0,a),n=this._data.slice(a);return[i,n]}},{key:"average",value:function(){var t=0,a=0,i=0,n=void 0;for(n=0;n<this._dataLength;n+=1)t+=this._data[n][0],a+=this._data[n][1],i+=this._data[n][2];return t/=this._dataLength,a/=this._dataLength,i/=this._dataLength,[parseInt(t,10),parseInt(a,10),parseInt(i,10)]}},{key:"size",value:function(){return this._dataLength}},{key:"_calculateMinMaxAxis",value:function(){var t=1;for(this._axisMinMax=[{min:this._data[0][0],max:this._data[0][0]},{min:this._data[0][1],max:this._data[0][1]},{min:this._data[0][2],max:this._data[0][2]}];t<this._dataLength;t+=1)this._axisMinMax[0].min=this._data[t][0]<this._axisMinMax[0].min?this._data[t][0]:this._axisMinMax[0].min,this._axisMinMax[1].min=this._data[t][1]<this._axisMinMax[1].min?this._data[t][1]:this._axisMinMax[1].min,this._axisMinMax[2].min=this._data[t][2]<this._axisMinMax[2].min?this._data[t][2]:this._axisMinMax[2].min,this._axisMinMax[0].max=this._data[t][0]>this._axisMinMax[0].max?this._data[t][0]:this._axisMinMax[0].max,this._axisMinMax[1].max=this._data[t][1]>this._axisMinMax[1].max?this._data[t][1]:this._axisMinMax[1].max,this._axisMinMax[2].max=this._data[t][2]>this._axisMinMax[2].max?this._data[t][2]:this._axisMinMax[2].max}},{key:"_medianPoint",value:function(){var t=this._getLargestAxis(),a=0,i=0,n=void 0,s=Number.MAX_VALUE,e=void 0;for(e=0;e<this._dataLength;e+=1)i+=this._data[e][t];for(i/=this._dataLength,e=0;e<this._dataLength;e+=1)n=Math.abs(this._data[e][t]-i),n<=s&&(a=e,s=n);return a}},{key:"_getLargestAxis",value:function(){for(var t=0,a=0,i=void 0,n=0,s=this._axisMinMax.length;n<s;n+=1)i=this._axisMinMax[n].max-this._axisMinMax[n].min,i>=a&&(t=n,a=i);return t}}]),t}();a.default=s,t.exports=a.default}]);